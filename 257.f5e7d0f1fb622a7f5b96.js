(self.webpackChunkorelarhplan=self.webpackChunkorelarhplan||[]).push([[257],{7257:(t,e,n)=>{"use strict";n.r(e),n.d(e,{ProjectsModule:()=>A});var o=n(1116),i=n(9705),r=n(5366),c=n(6328);function l(t,e){if(1&t&&(r.TgZ(0,"li",8),r.TgZ(1,"div",9),r.TgZ(2,"div",10),r.TgZ(3,"p"),r._uU(4),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t){const t=e.$implicit;r.Q6J("routerLink","edit/"+t.id),r.xp6(1),r.Udp("background-image","url("+t.uri+")"),r.xp6(3),r.Oqu(t.text)}}function a(t,e){if(1&t&&(r.TgZ(0,"ul",6),r.YNc(1,l,5,4,"li",7),r.qZA()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("ngForOf",t.projects)}}function s(t,e){1&t&&r._UZ(0,"div",13)}const g=function(){return[]};function p(t,e){1&t&&(r.TgZ(0,"div",11),r.YNc(1,s,1,0,"div",12),r.qZA()),2&t&&(r.xp6(1),r.Q6J("ngForOf",r.DdM(1,g).constructor(6)))}let d=(()=>{class t{constructor(t){this.projectsService=t,this.isLoading=!0}ngOnInit(){this.getProjects()}getProjects(){this.projectsService.getProjects().subscribe(t=>{this.projects=t,this.isLoading=!1})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(c.m))},t.\u0275cmp=r.Xpm({type:t,selectors:[["arh-projects-list"]],decls:8,vars:2,consts:[[1,"project-listing"],[1,"project-list__header"],[1,"title"],["routerLink","create",1,"btn","btn-primary"],["class","projects__list",4,"ngIf"],["class","preloader-list",4,"ngIf"],[1,"projects__list"],["class","projects__item box-shadow_hover",3,"routerLink",4,"ngFor","ngForOf"],[1,"projects__item","box-shadow_hover",3,"routerLink"],[1,"projects__box"],[1,"hover"],[1,"preloader-list"],["class","skeleton-box skeleton-box_news",4,"ngFor","ngForOf"],[1,"skeleton-box","skeleton-box_news"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"h1",2),r._uU(3,"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432"),r.qZA(),r.TgZ(4,"button",3),r._uU(5,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442"),r.qZA(),r.qZA(),r.YNc(6,a,2,1,"ul",4),r.YNc(7,p,2,2,"div",5),r.qZA()),2&t&&(r.xp6(6),r.Q6J("ngIf",!e.isLoading),r.xp6(1),r.Q6J("ngIf",e.isLoading))},directives:[i.rH,o.O5,o.sg],styles:[".project-list__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:50px}.project-list__description[_ngcontent-%COMP%]   .project-list__caption[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:15px}.project-list__description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;max-height:66px;min-height:66px}.btn[_ngcontent-%COMP%]{padding:10px 35px}.preloader-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-gap:30px;gap:30px}.skeleton-box[_ngcontent-%COMP%]{height:300px;margin-bottom:0}.projects__list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-gap:30px;gap:30px}.projects__item[_ngcontent-%COMP%]{position:relative;display:flex;align-items:flex-end;flex-direction:column;box-shadow:0 25px 50px -21px #0000004d;text-shadow:0 7px 6px #81583d12;border-radius:20px;background:#fff;transition:all .2s}.projects__item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:300px;object-fit:cover}.projects__box[_ngcontent-%COMP%]{max-height:325px;height:300px;background-color:#fff;background-size:cover;background-position:50%;align-content:center;font-size:.9rem;font-weight:500}.projects__box[_ngcontent-%COMP%], .projects__box[_ngcontent-%COMP%]   .hover[_ngcontent-%COMP%]{transition:all .2s ease-in-out;display:flex;justify-content:center;border-radius:20px}.projects__box[_ngcontent-%COMP%]   .hover[_ngcontent-%COMP%]{height:100%;background-color:#00000080;opacity:0;flex-flow:column;padding:2em}.projects__box[_ngcontent-%COMP%]   .hover[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;max-height:97px;min-height:266px;line-height:1.4;-webkit-line-clamp:12;-webkit-box-orient:vertical}.projects__box[_ngcontent-%COMP%]:hover{box-shadow:0 25px 50px -21px #0000004d}.projects__box[_ngcontent-%COMP%]:hover   .hover[_ngcontent-%COMP%]{background:#0009;opacity:1;cursor:pointer}"]}),t})();var f=n(6304),u=n(1462),x=n(5400),m=n(4001),_=n(9582);function h(t,e){if(1&t&&(r.TgZ(0,"span",18),r._uU(1),r.ALo(2,"number"),r.qZA()),2&t){const t=r.oxw().ngIf;r.xp6(1),r.hij(" ",r.lcZ(2,1,t),"% ")}}function b(t,e){1&t&&(r.TgZ(0,"span",19),r._uU(1,"Completed !"),r.qZA())}function v(t,e){if(1&t&&(r.TgZ(0,"div"),r._UZ(1,"progress",15),r._UZ(2,"br"),r.YNc(3,h,3,3,"span",16),r.YNc(4,b,2,0,"span",17),r.qZA()),2&t){const t=e.ngIf;r.xp6(1),r.Q6J("value",t),r.xp6(2),r.Q6J("ngIf",t<100),r.xp6(1),r.Q6J("ngIf",100==t)}}function Z(t,e){1&t&&(r.TgZ(0,"small"),r._uU(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 "),r.qZA())}function O(t,e){if(1&t&&(r.TgZ(0,"div",20),r.YNc(1,Z,2,0,"small",4),r.qZA()),2&t){const t=r.oxw();let e;r.xp6(1),r.Q6J("ngIf",null==(e=t.form.get("text"))||null==e.errors?null:e.errors.required)}}function C(t,e){if(1&t&&(r.TgZ(0,"span",19),r._uU(1),r.ALo(2,"number"),r.qZA()),2&t){const t=r.oxw().ngIf;r.xp6(1),r.hij(" ",r.lcZ(2,1,t),"% ")}}function P(t,e){1&t&&(r.TgZ(0,"span",20),r._uU(1,"Completed !"),r.qZA())}function w(t,e){if(1&t&&(r.TgZ(0,"div"),r._UZ(1,"progress",16),r._UZ(2,"br"),r.YNc(3,C,3,3,"span",17),r.YNc(4,P,2,0,"span",18),r.qZA()),2&t){const t=e.ngIf;r.xp6(1),r.Q6J("value",t),r.xp6(2),r.Q6J("ngIf",t<100),r.xp6(1),r.Q6J("ngIf",100==t)}}function M(t,e){1&t&&(r.TgZ(0,"small"),r._uU(1," \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 "),r.qZA())}function j(t,e){if(1&t&&(r.TgZ(0,"div",21),r.YNc(1,M,2,0,"small",4),r.qZA()),2&t){const t=r.oxw();let e;r.xp6(1),r.Q6J("ngIf",null==(e=t.form.get("text"))||null==e.errors?null:e.errors.required)}}const T=[{path:"",component:d},{path:"create",component:(()=>{class t{constructor(t,e,n,o){this.alertService=t,this.db=e,this.storage=n,this.router=o,this.downloadableURL=""}ngOnInit(){this.form=new u.cw({text:new u.NI(null,u.kI.required)})}selectFile(t){this.fileToUpload=t.target.files[0];const e=new FileReader;e.onload=t=>this.previewImageSrc=e.result,e.readAsDataURL(this.fileToUpload)}submit(){var t=this;return(0,f.Z)(function*(){!t.form.invalid&&t.fileToUpload&&(t.task=t.storage.upload(`images/${t.fileToUpload.name}`,t.fileToUpload),t.progressValue=t.task.percentageChanges(),(yield t.task).ref.getDownloadURL().then(e=>{t.downloadableURL=e;const n={text:t.form.value.text,uri:t.downloadableURL};t.db.list("/projects").push(n),t.alertService.success("\u0423\u0441\u043f\u0435\u0448\u043d\u043e!"),t.router.navigateByUrl("/arh-admin/projects").then()}))})()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(x.c),r.Y36(m.KQ),r.Y36(_.Q1),r.Y36(i.F0))},t.\u0275cmp=r.Xpm({type:t,selectors:[["arh-create-project"]],decls:21,vars:9,consts:[[1,"news-form",3,"formGroup","ngSubmit"],[1,"news-header"],[1,"title"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],[1,"card"],[1,"card-content"],[1,"card-content__left"],[1,"image"],["alt","Preview Image",3,"src"],["type","file","name","file","accept",".jpeg,.jpg,.png,.svg",1,"file",3,"input"],[1,"form-control","preview","mb-0"],["for","previewText"],["id","previewText","type","text","formControlName","text"],["class","validation",4,"ngIf"],["type","warning","max","100",2,"height","7mm","width","50%",3,"value"],["style","color:rgb(255, 60, 0); font-size: 17px; font-weight: 410;",4,"ngIf"],["style","color:rgb(1, 153, 34);  font-size: 17px; font-weight: 410;",4,"ngIf"],[2,"color","rgb(255, 60, 0)","font-size","17px","font-weight","410"],[2,"color","rgb(1, 153, 34)","font-size","17px","font-weight","410"],[1,"validation"]],template:function(t,e){if(1&t&&(r.TgZ(0,"form",0),r.NdJ("ngSubmit",function(){return e.submit()}),r.TgZ(1,"div",1),r.TgZ(2,"h1",2),r._uU(3,"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430"),r.qZA(),r.TgZ(4,"button",3),r._uU(5,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442"),r.qZA(),r.qZA(),r.YNc(6,v,5,3,"div",4),r.ALo(7,"async"),r.TgZ(8,"div",5),r.TgZ(9,"div",6),r.TgZ(10,"div",7),r.TgZ(11,"label"),r._uU(12,"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430"),r.qZA(),r.TgZ(13,"div",8),r._UZ(14,"img",9),r.TgZ(15,"input",10),r.NdJ("input",function(t){return e.selectFile(t)}),r.qZA(),r.qZA(),r.qZA(),r.TgZ(16,"div",11),r.TgZ(17,"label",12),r._uU(18,"\u0422\u0435\u043a\u0441\u0442 \u043f\u0440\u043e\u0435\u043a\u0442\u0430:"),r.qZA(),r._UZ(19,"textarea",13),r.YNc(20,O,2,1,"div",14),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t){let t,n;r.Q6J("formGroup",e.form),r.xp6(4),r.Q6J("disabled",e.form.invalid),r.xp6(2),r.Q6J("ngIf",r.lcZ(7,7,e.progressValue)),r.xp6(8),r.Q6J("src",e.previewImageSrc||"https://imgholder.ru/250x250/8493a8/adb9ca&text=IMAGE+HOLDER&font=kelson",r.LSH),r.xp6(2),r.ekj("invalid",(null==(t=e.form.get("text"))?null:t.touched)&&(null==(t=e.form.get("text"))?null:t.invalid)),r.xp6(4),r.Q6J("ngIf",(null==(n=e.form.get("text"))?null:n.touched)&&(null==(n=e.form.get("text"))?null:n.invalid))}},directives:[u._Y,u.JL,u.sg,o.O5,u.Fj,u.JJ,u.u],pipes:[o.Ov,o.JJ],styles:[".news-header[_ngcontent-%COMP%]{margin-bottom:30px;display:flex;justify-content:space-between;align-items:center}.card[_ngcontent-%COMP%]{background:#fff;padding:30px;box-shadow:0 25px 50px -21px #0000004d;border:1px solid #ebebeb;border-radius:10px}.card_mb[_ngcontent-%COMP%]{margin-bottom:30px}.card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:5px;font-weight:500}.card[_ngcontent-%COMP%]   .file[_ngcontent-%COMP%]{font-size:.9rem;margin-top:15px}.btn[_ngcontent-%COMP%]{padding:10px 35px;margin-left:auto}.form-control[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:20px}.form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background:#cccccc70;padding:10px;border:1px solid #316d9c}.form-control[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font:inherit;height:100%}.card-content[_ngcontent-%COMP%]{display:flex}.card-content__left[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:0 0 250px;margin-right:30px}.card-content__left[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{display:flex;flex-direction:column}.card-content__left[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:250px;object-fit:cover}.preview[_ngcontent-%COMP%]{width:100%}.invalid[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .invalid[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border:1px solid crimson}.validation[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.7rem;font-weight:500;color:crimson}"]}),t})()},{path:"edit/:id",component:(()=>{class t{constructor(t,e,n,o,i){this.alertService=t,this.db=e,this.storage=n,this.route=o,this.router=i,this.projectId=this.route.snapshot.paramMap.get("id"),this.isLoading=!0,this.form=new u.cw({text:new u.NI(null,u.kI.required)}),this.downloadableURL=""}ngOnInit(){this.db.object("projects/"+this.projectId).valueChanges().subscribe(t=>{this.isLoading=!1,this.project=t,this.form=new u.cw({text:new u.NI(null==t?void 0:t.text,u.kI.required)})})}selectFile(t){this.fileToUpload=t.target.files[0];const e=new FileReader;e.onload=t=>this.previewImageSrc=e.result,e.readAsDataURL(this.fileToUpload)}submit(){var t=this;return(0,f.Z)(function*(){if(!t.form.invalid)if(t.fileToUpload)t.task=t.storage.upload(`images/${t.fileToUpload.name}`,t.fileToUpload),t.progressValue=t.task.percentageChanges(),(yield t.task).ref.getDownloadURL().then(e=>{t.downloadableURL=e;const n={text:t.form.value.text,uri:t.downloadableURL};t.alertService.success("\u0423\u0441\u043f\u0435\u0448\u043d\u043e!"),t.db.list("projects").update(t.projectId,n).then(t=>t),t.router.navigateByUrl("/arh-admin/projects").then()});else{const e={text:t.form.value.text,uri:t.project.uri};t.alertService.success("\u0423\u0441\u043f\u0435\u0448\u043d\u043e!"),t.db.list("projects").update(t.projectId,e).then(t=>t),t.router.navigateByUrl("/arh-admin/projects").then()}})()}deleteProject(){this.alertService.success("\u0423\u0441\u043f\u0435\u0448\u043d\u043e!"),this.db.list("projects").remove(this.projectId).then(t=>t),this.router.navigateByUrl("/arh-admin/projects").then()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(x.c),r.Y36(m.KQ),r.Y36(_.Q1),r.Y36(i.gz),r.Y36(i.F0))},t.\u0275cmp=r.Xpm({type:t,selectors:[["arh-edit-project"]],decls:23,vars:9,consts:[[1,"news-form",3,"formGroup","ngSubmit"],[1,"news-header"],[1,"title"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],[1,"card"],[1,"card-content"],[1,"card-content__left"],[1,"image"],["alt","Preview Image",3,"src"],["type","file","name","file","accept",".jpeg,.jpg,.png,.svg",1,"file",3,"input"],[1,"form-control","preview","mb-0"],["for","previewText"],["id","previewText","type","text","formControlName","text"],["class","validation",4,"ngIf"],["type","button",1,"btn","btn-danger",3,"click"],["type","warning","max","100",2,"height","7mm","width","50%",3,"value"],["style","color:rgb(255, 60, 0); font-size: 17px; font-weight: 410;",4,"ngIf"],["style","color:rgb(1, 153, 34);  font-size: 17px; font-weight: 410;",4,"ngIf"],[2,"color","rgb(255, 60, 0)","font-size","17px","font-weight","410"],[2,"color","rgb(1, 153, 34)","font-size","17px","font-weight","410"],[1,"validation"]],template:function(t,e){if(1&t&&(r.TgZ(0,"form",0),r.NdJ("ngSubmit",function(){return e.submit()}),r.TgZ(1,"div",1),r.TgZ(2,"h1",2),r._uU(3,"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430"),r.qZA(),r.TgZ(4,"button",3),r._uU(5,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442"),r.qZA(),r.qZA(),r.YNc(6,w,5,3,"div",4),r.ALo(7,"async"),r.TgZ(8,"div",5),r.TgZ(9,"div",6),r.TgZ(10,"div",7),r.TgZ(11,"label"),r._uU(12,"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430"),r.qZA(),r.TgZ(13,"div",8),r._UZ(14,"img",9),r.TgZ(15,"input",10),r.NdJ("input",function(t){return e.selectFile(t)}),r.qZA(),r.qZA(),r.qZA(),r.TgZ(16,"div",11),r.TgZ(17,"label",12),r._uU(18,"\u0422\u0435\u043a\u0441\u0442 \u043f\u0440\u043e\u0435\u043a\u0442\u0430:"),r.qZA(),r._UZ(19,"textarea",13),r.YNc(20,j,2,1,"div",14),r.qZA(),r.qZA(),r.qZA(),r.TgZ(21,"button",15),r.NdJ("click",function(){return e.deleteProject()}),r._uU(22,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442"),r.qZA(),r.qZA()),2&t){let t,n;r.Q6J("formGroup",e.form),r.xp6(4),r.Q6J("disabled",e.form.invalid),r.xp6(2),r.Q6J("ngIf",r.lcZ(7,7,e.progressValue)),r.xp6(8),r.Q6J("src",e.previewImageSrc||(null==e.project?null:e.project.uri),r.LSH),r.xp6(2),r.ekj("invalid",(null==(t=e.form.get("text"))?null:t.touched)&&(null==(t=e.form.get("text"))?null:t.invalid)),r.xp6(4),r.Q6J("ngIf",(null==(n=e.form.get("text"))?null:n.touched)&&(null==(n=e.form.get("text"))?null:n.invalid))}},directives:[u._Y,u.JL,u.sg,o.O5,u.Fj,u.JJ,u.u],pipes:[o.Ov,o.JJ],styles:[".news-header[_ngcontent-%COMP%]{margin-bottom:30px;display:flex;justify-content:space-between;align-items:center}.card[_ngcontent-%COMP%]{background:#fff;padding:30px;box-shadow:0 25px 50px -21px #0000004d;border:1px solid #ebebeb;border-radius:10px}.card_mb[_ngcontent-%COMP%]{margin-bottom:30px}.card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:5px;font-weight:500}.card[_ngcontent-%COMP%]   .file[_ngcontent-%COMP%]{font-size:.9rem;margin-top:15px}.btn[_ngcontent-%COMP%]{padding:10px 35px;margin-left:auto}.form-control[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:20px}.form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background:#cccccc70;padding:10px;border:1px solid #316d9c}.form-control[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font:inherit;height:100%}.card-content[_ngcontent-%COMP%]{display:flex}.card-content__left[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:0 0 250px;margin-right:30px}.card-content__left[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{display:flex;flex-direction:column}.card-content__left[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:250px;object-fit:cover}.preview[_ngcontent-%COMP%]{width:100%}.invalid[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .invalid[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border:1px solid crimson}.validation[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.7rem;font-weight:500;color:crimson}.btn-danger[_ngcontent-%COMP%]{margin-top:30px;margin-left:auto}"]}),t})()}];let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[i.Bz.forChild(T)],i.Bz]}),t})(),A=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[o.ez,y,u.UX]]}),t})()}}]);